<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>나만의 감정 카드 만들기</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        /* 기본 폰트 및 스타일 초기화 */
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap');
        
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f0f2f5;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            padding: 40px 20px;
            min-height: 100vh;
            box-sizing: border-box;
            margin: 0;
        }

        .container {
            display: flex;
            flex-wrap: wrap;
            gap: 40px;
            width: 100%;
            max-width: 1000px;
            justify-content: center;
        }

        /* 입력 폼 스타일 */
        .controls {
            background-color: #ffffff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 400px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .controls h1 {
            margin: 0 0 10px;
            font-size: 24px;
            text-align: center;
            color: #333;
        }

        .input-group {
            display: flex;
            flex-direction: column;
        }

        .input-group label {
            margin-bottom: 8px;
            font-weight: 700;
            color: #555;
        }

        .input-group select,
        .input-group input,
        .input-group textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            font-family: 'Noto Sans KR', sans-serif;
            box-sizing: border-box;
            transition: border-color 0.3s;
        }
        
        .input-group select:focus,
        .input-group input:focus,
        .input-group textarea:focus {
            outline: none;
            border-color: #007bff;
        }

        .input-group textarea {
            resize: vertical;
            min-height: 120px;
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .button-group button {
            flex-grow: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.1s;
        }
        
        .button-group button:active {
            transform: scale(0.98);
        }

        #create-btn {
            background-color: #007bff;
            color: white;
        }
        #create-btn:hover {
            background-color: #0056b3;
        }
        
        #save-btn {
            background-color: #28a745;
            color: white;
        }
         #save-btn:hover {
            background-color: #1e7e34;
        }

        /* 카드 결과물 스타일 */
        .card-wrapper {
            width: 100%;
            max-width: 450px;
        }
        
        #card {
            width: 450px;
            height: 600px;
            border-radius: 16px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
            padding: 40px;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            color: #fff;
            transition: background-color 0.5s;
            overflow: hidden; /* 아이콘이 카드를 벗어나지 않도록 */
            position: relative; /* 아이콘 위치 기준 */
        }
        
        /* 감정별 카드 테마 */
        .card-joy { background: linear-gradient(135deg, #FFD700, #FFA500); }
        .card-sadness { background: linear-gradient(135deg, #4682B4, #1E90FF); }
        .card-anger { background: linear-gradient(135deg, #DC143C, #B22222); }
        .card-surprise { background: linear-gradient(135deg, #9370DB, #8A2BE2); }
        .card-love { background: linear-gradient(135deg, #FF69B4, #FF1493); }

        .card-header .from {
            font-size: 24px;
            font-weight: 700;
        }
        
        .card-body {
            flex-grow: 1;
            display: flex;
            align-items: center; /* 메시지 세로 중앙 정렬 */
        }

        .card-body .message {
            font-size: 20px;
            line-height: 1.6;
            white-space: pre-wrap; /* 줄바꿈 및 공백 유지 */
            word-break: keep-all;
        }

        .emotion-icon {
            position: absolute;
            bottom: -20px;
            right: -20px;
            width: 180px;
            height: 180px;
            opacity: 0.15;
            z-index: 0;
        }
        
        .card-content {
            position: relative;
            z-index: 1;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        /* 모바일 반응형 */
        @media (max-width: 992px) {
            .container {
                flex-direction: column;
                align-items: center;
            }
            .card-wrapper, #card {
                width: 100%;
                max-width: 450px;
                height: auto;
                min-height: 500px;
            }
        }
    </style>
</head>
<body>

    <div class="container">
        <div class="controls">
            <h1>나만의 감정 카드 만들기</h1>
            
            <div class="input-group">
                <label for="emotion-select">1. 감정을 선택하세요</label>
                <select id="emotion-select">
                    <option value="joy">기쁨 😊</option>
                    <option value="sadness">슬픔 😢</option>
                    <option value="anger">화남 😠</option>
                    <option value="surprise">놀람 😮</option>
                    <option value="love">사랑 🥰</option>
                </select>
            </div>

            <div class="input-group">
                <label for="from-input">2. 보내는 사람</label>
                <input type="text" id="from-input" placeholder="이름을 입력하세요">
            </div>

            <div class="input-group">
                <label for="message-input">3. 메시지 남기기</label>
                <textarea id="message-input" placeholder="전하고 싶은 메시지를 적어보세요."></textarea>
            </div>

            <div class="button-group">
                <button id="create-btn">카드 만들기</button>
                <button id="save-btn">이미지로 저장</button>
            </div>
        </div>

        <div class="card-wrapper">
            <div id="card" class="card-joy">
                <div class="emotion-icon" id="card-icon">
                    <svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-2.5-6.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5-1.5-.67-1.5-1.5.67-1.5 1.5-1.5zm5 0c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5-1.5-.67-1.5-1.5.67-1.5 1.5-1.5zm-5.03 4.13c.48.51 1.12 1.25 2.53 1.25s2.05-.74 2.53-1.25c.16-.17.42-.18.59-.02.2.19.2.5.01.69C14.7 18.5 13.43 19 12 19s-2.7-.5-3.59-1.42c-.19-.19-.18-.5.01-.69.17-.16.43-.15.59.02z"/></svg>
                </div>
                <div class="card-content">
                    <div class="card-header">
                        <p class="from" id="card-from">From. 당신의 마음</p>
                    </div>
                    <div class="card-body">
                        <p class="message" id="card-message">여기에 메시지가 표시됩니다.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // DOM 요소 가져오기
        const emotionSelect = document.getElementById('emotion-select');
        const fromInput = document.getElementById('from-input');
        const messageInput = document.getElementById('message-input');
        const createBtn = document.getElementById('create-btn');
        const saveBtn = document.getElementById('save-btn');
        const card = document.getElementById('card');
        const cardFrom = document.getElementById('card-from');
        const cardMessage = document.getElementById('card-message');
        const cardIcon = document.getElementById('card-icon');

        // 감정별 아이콘 SVG 데이터
        const icons = {
            joy: `<svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-2.5-6.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5-1.5-.67-1.5-1.5.67-1.5 1.5-1.5zm5 0c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5-1.5-.67-1.5-1.5.67-1.5 1.5-1.5zm-5.03 4.13c.48.51 1.12 1.25 2.53 1.25s2.05-.74 2.53-1.25c.16-.17.42-.18.59-.02.2.19.2.5.01.69C14.7 18.5 13.43 19 12 19s-2.7-.5-3.59-1.42c-.19-.19-.18-.5.01-.69.17-.16.43-.15.59.02z"/></svg>`,
            sadness: `<svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 2c5.52 0 10 4.48 10 10s-4.48 10-10 10S2 17.52 2 12 6.48 2 12 2zm0 18c4.41 0 8-3.59 8-8s-3.59-8-8-8-8 3.59-8 8 3.59 8 8 8zm-2-8c-.83 0-1.5-.67-1.5-1.5S9.17 9 10 9s1.5.67 1.5 1.5S10.83 12 10 12zm4 0c-.83 0-1.5-.67-1.5-1.5S13.17 9 14 9s1.5.67 1.5 1.5S14.83 12 14 12zm-4.01 3.44c-.49.44-1.12.87-2.49.87-1.66 0-2.88-1.04-2.9-1.06-.21-.23-.55-.22-.76.02-.22.24-.2.59.03.81.04.03 1.48 1.23 3.63 1.23 1.98 0 2.88-.73 3.42-1.22.2-.18.21-.49.03-.69a.488.488 0 00-.69-.01z"/></svg>`,
            anger: `<svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-2.5-9C8.67 11 8 10.33 8 9.5s.67-1.5 1.5-1.5S11 8.67 11 9.5 10.33 11 9.5 11zm5 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm-.16 5.56c-.53.48-1.2.94-2.34.94s-1.81-.46-2.34-.94c-.18-.16-.45-.16-.63 0-.2.2-.2.51 0 .71C10.19 18.42 11.05 19 12 19s1.81-.58 2.5-1.73c.2-.2.2-.51 0-.71-.18-.16-.45-.16-.63 0z"/></svg>`,
            surprise: `<svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zM9.5 9c.83 0 1.5.67 1.5 1.5S10.33 12 9.5 12 8 11.33 8 10.5 8.67 9 9.5 9zm5 0c.83 0 1.5.67 1.5 1.5S15.33 12 14.5 12 13 11.33 13 10.5 13.67 9 14.5 9zm-2.5 4c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>`,
            love: `<svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>`
        };

        // '카드 만들기' 버튼 클릭 이벤트
        createBtn.addEventListener('click', () => {
            // 1. 입력값 가져오기
            const emotion = emotionSelect.value;
            const fromText = fromInput.value;
            const messageText = messageInput.value;

            // 2. 카드 내용 업데이트
            cardFrom.textContent = fromText ? `From. ${fromText}` : 'From. 당신의 마음';
            cardMessage.textContent = messageText ? messageText : '여기에 메시지가 표시됩니다.';

            // 3. 카드 스타일 변경
            // 모든 card- 클래스 제거 후, 선택한 감정 클래스 추가
            card.className = ''; // 기존 클래스 모두 제거
            card.classList.add(`card-${emotion}`);

            // 4. 아이콘 변경
            cardIcon.innerHTML = icons[emotion] || '';
        });

        // '이미지로 저장' 버튼 클릭 이벤트
        saveBtn.addEventListener('click', () => {
            html2canvas(document.getElementById('card')).then(canvas => {
                // a 태그를 만들어서 다운로드 링크로 사용
                const link = document.createElement('a');
                link.download = 'emotion-card.png';
                link.href = canvas.toDataURL('image/png');
                link.click(); // 링크를 클릭하여 다운로드 실행
            });
        });

        // 페이지 로드 시 기본 카드 한번 생성
        createBtn.click();

    </script>
</body>
</html>